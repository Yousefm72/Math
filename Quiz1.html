<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الرياضيات - العمليات الحسابية مع الأقواس</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .quiz-container {
            max-width: 1000px;
            margin: 120px auto 2rem;
            padding: 0 20px;
        }
        
        .quiz-header {
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .quiz-intro {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border: 2px solid #e5e7eb;
        }
        
        .instructions {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .score-display {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .question-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .question-card.correct {
            border-color: #22c55e;
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
        }
        
        .question-card.incorrect {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
        }
        
        .question-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .question-expression {
            font-size: 2.5rem;
            font-weight: 600;
            text-align: center;
            color: var(--text-color);
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: #f9fafb;
            border-radius: 12px;
            border: 2px solid var(--border-color);
        }
        
        .answer-section {
            margin-top: 1.5rem;
        }
        
        .answer-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1.5rem;
            text-align: center;
            direction: ltr;
            margin-bottom: 1rem;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .check-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
 that: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .check-button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }
        
        .check-button:disabled {
            background: var(--text-light);
            cursor: not-allowed;
            transform: none;
        }
        
        .solution-section {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            display: none;
        }
        
        .solution-step {
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .step-number {
            background: var(--accent-color);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 0.5rem;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .step-calculation {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--secondary-color);
            text-align: center;
            margin: 0.5rem 0;
            padding: 0.5rem;
            background: #f0f4ff;
            border-radius: 6px;
        }
        
        .final-answer {
            background: #dcfce7;
            color: #166534;
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            margin-top: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .quiz-results {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
        }
        
        .final-score {
            font-size: 3rem;
            font-weight: 700;
            margin: 1rem 0;
        }
        
        .score-animation {
            animation: pulse 2s ease-in-out;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .restart-button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        
        .restart-button:hover {
            background: #6d28d9;
            transform: translateY(-2px);
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            margin-bottom: 2rem;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        @media (max-width: 768px) {
            .quiz-container {
                margin: 100px auto 2rem;
                padding: 0 15px;
            }
            
            .question-expression {
                font-size: 1.8rem;
            }
            
            .quiz-controls {
                flex-direction: column;
                text-align: center;
            }
            
            .answer-input {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <i class="fas fa-calculator"></i>
                <span>تعلم الرياضيات مع يوسف</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">الرئيسية</a></li>
                <li><a href="Page1.html">الجمع والطرح</a></li>
                <li><a href="Page2.html">المعادلات</a></li>
                <li><a href="HomeWork.html">الواجب</a></li>
                <li><a href="Quiz1.html" class="active">الاختبار</a></li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main>
        <div class="quiz-container">
            <div class="quiz-header">
                <h1><i class="fas fa-question-circle"></i> اختبار الرياضيات</h1>
                <p>العمليات الحسابية مع الأقواس</p>
                <p>اختبر فهمك للجمع والطرح باستخدام أنواع مختلفة من الأقواس</p>
            </div>

            <div class="quiz-intro">
                <div class="instructions">
                    <h3>📝 تعليمات الاختبار</h3>
                    <p>حل المسائل الـ10 التالية بالترتيب وحاول أن تجيب على كل سؤال</p>
                    <p>تذكر ترتيب العمليات الحسابية (PEMDAS): الأقواس أولاً، ثم الجمع والطرح</p>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="quiz-controls">
                    <div class="score-display">
                        <i class="fas fa-trophy"></i>
                        النتيجة: <span id="scoreDisplay">0/10</span>
                    </div>
                    <button class="btn btn-secondary" id="showAllSolutions">
                        <i class="fas fa-lightbulb"></i>
                        عرض جميع الحلول
                    </button>
                </div>
            </div>

            <!-- السؤال 1 -->
            <div class="question-card" data-question="1">
                <div class="question-number">1</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">15 + (8 + 12)</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="35" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(1)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="1">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة أولاً:</div>
                            <div class="step-calculation">8 + 12 = 20</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> استبدال النتيجة:</div>
                            <div class="step-calculation">15 + (20) = 15 + 20 = 35</div>
                        </div>
                        </div class="final-answer">الإجابة الصحيحة: 35</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 2 -->
            <div class="question-card" data-question="2">
                <div class="question-number">2</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">50 - {25 - (10 + 5)}</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="40" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(2)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="2">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الداخلية:</div>
                            <div class="step-calculation">10 + 5 = 15</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">25 - (15) = 25 - 15 = 10</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> العملية النهائية:</div>
                            <div class="step-calculation">50 - {10} = 50 - 10 = 40</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 40</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 3 -->
            <div class="question-card" data-question="3">
                <div class="question-number">3</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">[12 + (7 - 3)] + 8</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="24" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(3)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="3">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة أولاً:</div>
                            <div class="step-calculation">7 - 3 = 4</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">12 + (4) = 12 + 4 = 16</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> العملية النهائية:</div>
                            <div class="step-calculation">[16] + 8 = 16 + 8 = 24</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 24</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 4 -->
            <div class="question-card" data-question="4">
                <div class="question-number">4</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">{30 - (15 + 5)} - 8</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="2" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(4)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="4">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة أولاً:</div>
                            <div class="step-calculation">15 + 5 = 20</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">30 - (20) = 30 - 20 = 10</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> العملية النهائية:</div>
                            <div class="step-calculation">{10} - 8 = 10 - 8 = 2</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 2</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 5 -->
            <div class="question-card" data-question="5">
                <div class="question-number">5</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">22 + [15 - {8 + (6 - 4)}]</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="29" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(5)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="5">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الداخلية:</div>
                            <div class="step-calculation">6 - 4 = 2</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">8 + (2) = 8 + 2 = 10</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">15 - {10} = 15 - 10 = 5</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">4</span> العملية النهائية:</div>
                            <div class="step-calculation">22 + [5] = 22 + 5 = 27</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 27</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 6 -->
            <div class="question-card" data-question="6">
                <div class="question-number">6</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">40 - [20 + (12 - 8)]</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="16" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(6)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="6">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة أولاً:</div>
                            <div class="step-calculation">12 - 8 = 4</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">20 + (4) = 20 + 4 = 24</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> العملية النهائية:</div>
                            <div class="step-calculation">40 - [24] = 40 - 24 = 16</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 16</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 7 -->
            <div class="question-card" data-question="7">
                <div class="question-number">7</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">{25 - (10 + 5)} + [15 - (8 + 2)]</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="20" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(7)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="7">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الأولى:</div>
                            <div class="step-calculation">10 + 5 = 15</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المستديرة الثانية:</div>
                            <div class="step-calculation">8 + 2 = 10</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">25 - (15) = 25 - 15 = 10</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">4</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">15 - (10) = 15 - 10 = 5</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">5</span> العملية النهائية:</div>
                            <div class="step-calculation">{10} + [5] = 10 + 5 = 15</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 15</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 8 -->
            <div class="question-card" data-question="8">
                <div class="question-number">8</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">[18 + (9 - 6)] - {12 - (5 + 3)}</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="17" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(8)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="8">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الأولى:</div>
                            <div class="step-calculation">9 - 6 = 3</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المستديرة الثانية:</div>
                            <div class="step-calculation">5 + 3 = 8</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">18 + (3) = 18 + 3 = 21</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">4</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">12 - (8) = 12 - 8 = 4</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">5</span> العملية النهائية:</div>
                            <div class="step-calculation">[21] - {4} = 21 - 4 = 17</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 17</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 9 -->
            <div class="question-card" data-question="9">
                <div class="question-number">9</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">35 - {20 - [12 + (8 - 5)]}</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="28" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(9)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="9">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الداخلية:</div>
                            <div class="step-calculation">8 - 5 = 3</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المعقوفة:</div>
                            <div class="step-calculation">12 + (3) = 12 + 3 = 15</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">20 - [15] = 20 - 15 = 5</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">4</span> العملية النهائية:</div>
                            <div class="step-calculation">35 - {5} = 35 - 5 = 30</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 30</div>
                    </div>
                </div>
            </div>

            <!-- السؤال 10 -->
            <div class="question-card" data-question="10">
                <div class="question-number">10</div>
                <h3>احسب النتيجة التالية:</h3>
                <div class="question-expression">[25 + (15 - 10)] + {18 - [7 + (12 - 8)]}</div>
                <div class="answer-section">
                    <input type="number" class="answer-input" data-correct="31" placeholder="أدخل إجابتك">
                    <button class="check-button" onclick="checkAnswer(10)">تحقق من الإجابة</button>
                    <div class="solution-section" data-solution="10">
                        <div class="solution-step">
                            <div><span class="step-number">1</span> حل الأقواس المستديرة الأولى:</div>
                            <div class="step-calculation">15 - 10 = 5</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">2</span> حل الأقواس المستديرة الثانية:</div>
                            <div class="step-calculation">12 - 8 = 4</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">3</span> حل الأقواس المعقوفة الأولى:</div>
                            <div class="step-calculation">25 + (5) = 25 + 5 = 30</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">4</span> حل الأقواس المعقوفة الثانية:</div>
                            <div class="step-calculation">7 + (4) = 7 + 4 = 11</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">5</span> حل الأقواس المعكوفة:</div>
                            <div class="step-calculation">18 - [11] = 18 - 11 = 7</div>
                        </div>
                        <div class="solution-step">
                            <div><span class="step-number">6</span> العملية النهائية:</div>
                            <div class="step-calculation">[30] + {7} = 30 + 7 = 37</div>
                        </div>
                        <div class="final-answer">الإجابة الصحيحة: 37</div>
                    </div>
                </div>
            </div>

            <!-- نتائج الاختبار -->
            <div class="quiz-results" id="quizResults">
                <h2><i class="fas fa-trophy"></i> نتائج الاختبار النهائية</h2>
                <div class="final-score" id="finalScore">0/10</div>
                <p id="congratulationsMessage"></p>
                <button class="restart-button" onclick="restartQuiz()">
                    <i class="fas fa-redo"></i> إعادة الاختبار
                </button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>تعلم الرياضيات مع يوسف</h3>
                    <p>منصة تعليمية شاملة لتعلم الرياضيات من الأساسيات</p>
                </div>
                <div class="footer-section">
                    <h3>روابط الدروس</h3>
                    <ul>
                        <li><a href="index.html">الرئيسية</a></li>
                        <li><a href="Page1.html">الجمع والطرح</a></li>
                        <li><a href="Page2.html">المعادلات</a></li>
                        <li><a href="HomeWork.html">الواجب المنزلي</a></li>
                        <li><a href="Quiz1.html">الاختبار</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>نصائح الاختبار</h3>
                    <ul>
                        <li>اقرأ السؤال بعناية</li>
                        <li>تذكر ترتيب العمليات</li>
                        <li>تحقق من إجابتك</li>
                        <li>تدرب على الأقواس</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 موقع تعلم الرياضيات مع يوسف. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <script>
        let score = 0;
        let questionsAnswered = 0;
        const totalQuestions = 10;

        function checkAnswer(questionNumber) {
            const questionCard = document.querySelector(`[data-question="${questionNumber}"]`);
            const answerInput = questionCard.querySelector('.answer-input');
            const correctAnswer = parseInt(answerInput.getAttribute('data-correct'));
            const userAnswer = parseInt(answerInput.value);
            const solutionSection = questionCard.querySelector('.solution-section');
            const checkButton = questionCard.querySelector('.check-button');
            
            if (isNaN(userAnswer)) {
                alert('يرجى إدخال رقم صحيح');
                return;
            }

            if (userAnswer === correctAnswer) {
                questionCard.classList.add('correct');
                questionCard.classList.remove('incorrect');
                score++;
            } else {
                questionCard.classList.add('incorrect');
                questionCard.classList.remove('correct');
            }

            solutionSection.style.display = 'block';
            checkButton.disabled = true;
            answerInput.disabled = true;
            
            questionsAnswered++;
            updateProgress();
            updateScore();
            
            if (questionsAnswered === totalQuestions) {
                showFinalResults();
            }
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const percentage = (questionsAnswered / totalQuestions) * 100;
            progressFill.style.width = `${percentage}%`;
        }

        function updateScore() {
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `${score}/${questionsAnswered}`;
        }

        function showFinalResults() {
            setTimeout(() => {
                document.getElementById('quizResults').style.display = 'block';
                document.getElementById('finalScore').textContent = `${score}/${totalQuestions}`;
                document.getElementById('finalScore').classList.add('score-animation');
                
                const message = getCongratulationsMessage();
                document.getElementById('congratulationsMessage').textContent = message;
                
                // Scroll to results
                document.getElementById('quizResults').scrollIntoView({
                    behavior: 'smooth'
                });
            }, 1000);
        }

        function getCongratulationsMessage() {
            const percentage = (score / totalQuestions) * 100;
            
            if (percentage === 100) {
                return '🎉 ممتاز! لقد أحرزت النتيجة الكاملة! تمكنت من حل جميع المسائل بشكل صحيح.';
            } else if (percentage >= 80) {
                return '🏆 جيد جداً! لديك فهم ممتاز للعمليات الحسابية مع الأقواس.';
            } else if (percentage >= 60) {
                return '👏 جيد! لديك فهم جيد، ولكن يمكنك التحسن أكثر بالتمرين.';
            } else if (percentage >= 40) {
                return '📚 مقبول، ولكن تحتاج إلى مراجعة الدروس والتمرين أكثر.';
            } else {
                return '💪 لا تستسلم! راجع الدروس وتدرب أكثر، وستنجح بالتأكيد.';
            }
        }

        function restartQuiz() {
            score = 0;
            questionsAnswered = 0;
            
            // Reset all question cards
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('correct', 'incorrect');
                card.querySelector('.solution-section').style.display = 'none';
                card.querySelector('.answer-input').value = '';
                card.querySelector('.answer-input').disabled = false;
                card.querySelector('.check-button').disabled = false;
            });
            
            // Reset results
            document.getElementById('quizResults').style.display = 'none';
            document.getElementById('finalScore').classList.remove('score-animation');
            
            // Update displays
            updateProgress();
            updateScore();
            
            // Scroll to top
            document.querySelector('.quiz-intro').scrollIntoView({
                behavior: 'smooth'
            });
        }

        function showAllSolutions() {
            document.querySelectorAll('.solution-section').forEach(section => {
                section.style.display = 'block';
            });
            
            document.getElementById('showAllSolutions').style.display = 'none';
        }

        // Add mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        });

        // Add enter key support for answer inputs
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const focusedInput = document.activeElement;
                if (focusedInput.classList.contains('answer-input')) {
                    const questionNumber = parseInt(focusedInput.closest('.question-card').getAttribute('data-question'));
                    checkAnswer(questionNumber);
                }
            }
        });
    </script>
</body>
</html>
